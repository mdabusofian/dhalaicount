<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶¢‡¶æ‡¶≤‡¶æ‡¶á ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ V3 - ‡¶ö‡ßÇ‡ßú‡¶æ‡¶®‡ßç‡¶§</title>
    <style>
        /* Base Styling */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f4f7; /* Light Blue Background */
            color: #333;
        }
        .container {
            max-width: 650px;
            margin: 0 auto;
            background: #ffffff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h2 {
            color: #0d47a1; /* Dark Blue Header */
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 3px solid #bbdefb;
            padding-bottom: 10px;
        }

        /* Input/Session Styling */
        .session-info {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .session-info input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #90caf9;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .session-info label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }
        #startProject {
            background-color: #4CAF50;
            color: white;
            margin-top: 15px;
        }

        /* Section Styling */
        .controls, .summary, .submit-section {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 8px;
        }
        .controls {
            background-color: #fcfcfc;
            border: 1px solid #e0e0e0;
        }
        .summary {
            background-color: #fff8e1; /* Yellow for summary */
            border: 1px solid #ffe082;
        }

        /* Button Styling */
        button {
            padding: 12px;
            margin: 8px 0;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            transition: background-color 0.3s, opacity 0.3s;
            width: 100%;
            font-weight: bold;
        }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #addSand {
            background-color: #64b5f6; /* Lighter Blue */
            color: white;
        }
        #addConcrete {
            background-color: #26a69a; /* Teal */
            color: white;
        }
        #nextBatch {
            background-color: #ffb74d; /* Light Amber when ready */
            color: #333;
        }
        #finalSubmit {
            background-color: #e53935; /* Red for final action */
            color: white;
            margin-top: 20px;
        }
        
        /* Display Counters */
        .counter-display {
            display: flex;
            justify-content: space-around;
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background-color: #eceff1;
            border-radius: 6px;
        }
        .counter-item {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            flex-grow: 1;
        }
        .counter-item span {
            color: #0d47a1; /* Dark Blue */
        }
        
        .status-board {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            font-weight: bold;
            text-align: center;
            min-height: 40px;
        }
        
        /* Summary Styling */
        .summary p {
            font-size: 16px;
            margin: 8px 0;
            padding-left: 10px;
            border-left: 4px solid #f9a825;
        }
        .summary strong {
            font-size: 18px;
            color: #d84315;
        }
        
    </style>
</head>
<body>

<div class="container">
    <h2>üèóÔ∏è ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶¢‡¶æ‡¶≤‡¶æ‡¶á ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</h2>
    <p style="text-align: center;">‡¶Æ‡¶ø‡¶ï‡ßç‡¶∏ ‡¶Ö‡¶®‡ßÅ‡¶™‡¶æ‡¶§: **‡ßß ‡¶¨‡¶∏‡ßç‡¶§‡¶æ ‡¶∏‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü : ‡ß© ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶¨‡¶æ‡¶≤‡¶ø : ‡ß´ ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü**</p>

    <div class="session-info" id="sessionSetup">
        <h3>‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø (‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®)</h3>
        <label for="projectName">‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü/‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
        <input type="text" id="projectName" value="‡¶®‡¶§‡ßÅ‡¶® ‡¶õ‡¶æ‡¶¶ ‡¶¢‡¶æ‡¶≤‡¶æ‡¶á" required>
        
        <label for="projectDate">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
        <input type="date" id="projectDate" required>
        
        <button id="startProject">‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>

    <div id="mainTracker" style="display: none;">
        <div class="controls">
            <h3>‡ßß. ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ö (<span id="cementCountDisplay">‡ßß</span> ‡¶®‡¶Ç ‡¶¨‡¶∏‡ßç‡¶§‡¶æ)</h3>
            
            <div class="counter-display">
                <div class="counter-item">
                    ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶¨‡¶æ‡¶≤‡¶ø: <span id="sandCounter">3</span>
                </div>
                <div class="counter-item">
                    ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü: <span id="concreteCounter">5</span>
                </div>
            </div>

            <button id="addSand">‡ßß ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶¨‡¶æ‡¶≤‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button id="addConcrete">‡ßß ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            
            <div id="batchStatus" class="status-board" style="background-color: #fff9c4; color: #f9a825;">‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>
            
            <button id="nextBatch" disabled>‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶¨‡¶∏‡ßç‡¶§‡¶æ (‡¶∏‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá)</button>
        </div>

        <div class="summary">
            <h3>‡ß®. ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßá‡¶∑ ‡¶Ö‡¶¨‡¶ß‡¶ø ‡¶Æ‡ßã‡¶ü ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h3>
            <p>‡¶Æ‡ßã‡¶ü ‡¶∏‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü: <strong id="totalCement">0</strong> ‡¶¨‡¶∏‡ßç‡¶§‡¶æ</p>
            <p>‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶≤‡¶ø: <strong id="totalSand">0</strong> ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø</p>
            <p>‡¶Æ‡ßã‡¶ü ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü: <strong id="totalConcrete">0</strong> ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø</p>
        </div>

        <div class="submit-section">
            <h3>‡ß©. ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°</h3>
            <button id="finalSubmit">‡¶Æ‡ßã‡¶ü ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßá‡¶∑ ‡¶ì ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ Google Sheet-‡¶è ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
            <div id="submitMessage" class="status-board" style="background-color: #fbebeb; color: #e53935;">‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§</div>
        </div>
    </div>
</div>

<script>
    // ====================================================================================
    // !!! ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£: ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® !!!
    // ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶®, ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá Google Form-‡¶è "‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" ‡¶è‡¶¨‡¶Ç "‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ" ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§
    // ====================================================================================
    const GOOGLE_FORM_URL = '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞_‡¶´‡¶∞‡ßç‡¶Æ_‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏_URL_‡¶è‡¶ñ‡¶æ‡¶®‡ßá_‡¶¶‡¶ø‡¶®'; 
    const ENTRY_ID_PROJECT = 'entry.PPPPPPPPP';  // ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
    const ENTRY_ID_DATE = 'entry.DDDDDDDDD';     // ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
    const ENTRY_ID_CEMENT = 'entry.XXXXXXXXX';   // ‡¶∏‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
    const ENTRY_ID_SAND = 'entry.YYYYYYYYY';     // ‡¶¨‡¶æ‡¶≤‡¶ø‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
    const ENTRY_ID_CONCRETE = 'entry.ZZZZZZZZZ'; // ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü‡ßá‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Ü‡¶á‡¶°‡¶ø ‡¶¶‡¶ø‡¶®
    // ====================================================================================

    const SAND_PER_BATCH = 3;
    const CONCRETE_PER_BATCH = 5;

    let currentSand = 0;
    let currentConcrete = 0;
    let totalCement = 0;
    let totalSand = 0;
    let totalConcrete = 0;
    
    let projectDetails = { name: '', date: '' };


    // --- DOM ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ---
    const mainTracker = document.getElementById('mainTracker');
    const sessionSetup = document.getElementById('sessionSetup');
    const startProjectButton = document.getElementById('startProject');
    const projectNameInput = document.getElementById('projectName');
    const projectDateInput = document.getElementById('projectDate');
    
    const sandCounter = document.getElementById('sandCounter');
    const concreteCounter = document.getElementById('concreteCounter');
    const totalCementDisplay = document.getElementById('totalCement');
    const totalSandDisplay = document.getElementById('totalSand');
    const totalConcreteDisplay = document.getElementById('totalConcrete');
    const cementCountDisplay = document.getElementById('cementCountDisplay');
    const nextBatchButton = document.getElementById('nextBatch');
    const finalSubmitButton = document.getElementById('finalSubmit');
    const batchStatus = document.getElementById('batchStatus');
    const submitMessage = document.getElementById('submitMessage');
    const addSandButton = document.getElementById('addSand');
    const addConcreteButton = document.getElementById('addConcrete');
    
    // --- ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
    startProjectButton.addEventListener('click', () => {
        if (projectNameInput.value && projectDateInput.value) {
            projectDetails.name = projectNameInput.value;
            projectDetails.date = projectDateInput.value;
            sessionSetup.style.display = 'none';
            mainTracker.style.display = 'block';
            alert(`‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ! ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü: ${projectDetails.name}, ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${projectDetails.date}`);
            updateDisplay();
        } else {
            alert("‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§");
        }
    });

    // --- ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
    function updateDisplay() {
        // ‡¶∞‡¶ø‡¶≠‡¶æ‡¶∞‡ßç‡¶∏ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ø‡¶Ç
        sandCounter.textContent = SAND_PER_BATCH - currentSand;
        concreteCounter.textContent = CONCRETE_PER_BATCH - currentConcrete;
        
        cementCountDisplay.textContent = totalCement + 1;
        totalCementDisplay.textContent = totalCement;
        totalSandDisplay.textContent = totalSand;
        totalConcreteDisplay.textContent = totalConcrete;

        const isSandComplete = currentSand >= SAND_PER_BATCH;
        const isConcreteComplete = currentConcrete >= CONCRETE_PER_BATCH;

        // ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ
        addSandButton.disabled = isSandComplete;
        addConcreteButton.disabled = isConcreteComplete;
        
        // ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶ì ‡¶¨‡¶æ‡¶ü‡¶® ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£
        if (isSandComplete && isConcreteComplete) {
            nextBatchButton.disabled = false;
            nextBatchButton.style.backgroundColor = '#4CAF50'; /* Green when ready */
            nextBatchButton.textContent = `‚úÖ ${totalCement + 1} ‡¶®‡¶Ç ‡¶¨‡¶∏‡ßç‡¶§‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®‡•§ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶¨‡¶∏‡ßç‡¶§‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
            batchStatus.style.backgroundColor = '#e8f5e9';
            batchStatus.style.color = '#1b5e20';
            batchStatus.textContent = "‚úÖ ‡¶è‡¶á ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ö‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® (‡ß© ‡¶¨‡¶æ‡¶≤‡¶ø, ‡ß´ ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü) ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá‡•§";
        } else {
            nextBatchButton.disabled = true;
            nextBatchButton.style.backgroundColor = '#ffb74d'; /* Amber when not ready */
            nextBatchButton.textContent = `‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶¨‡¶∏‡ßç‡¶§‡¶æ (‡¶∏‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá)`;
            
            let missing = [];
            if (!isSandComplete) {
                missing.push(`‡¶¨‡¶æ‡¶≤‡¶ø (${SAND_PER_BATCH - currentSand})`);
            }
            if (!isConcreteComplete) {
                missing.push(`‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü (${CONCRETE_PER_BATCH - currentConcrete})`);
            }

            if (missing.length > 0) {
                 batchStatus.style.backgroundColor = '#fff9c4';
                 batchStatus.style.color = '#f9a825';
                 batchStatus.textContent = `‚ö†Ô∏è ‡¶Ü‡¶∞‡¶ì ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá: ${missing.join(' ‡¶è‡¶¨‡¶Ç ')} ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø‡•§`;
            } else {
                 batchStatus.textContent = "‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
            }
        }
    }

    // --- ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶´‡¶∞‡ßç‡¶Æ‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
    function submitToGoogleForm() {
        if (!projectDetails.name || !projectDetails.date) {
            alert("‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá!");
            return;
        }

        submitMessage.style.backgroundColor = '#e3f2fd';
        submitMessage.style.color = '#1565c0';
        submitMessage.textContent = "üîÑ ‡¶°‡ßá‡¶ü‡¶æ Google Sheet-‡¶è ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...";
        finalSubmitButton.disabled = true;

        const data = {
            [ENTRY_ID_PROJECT]: projectDetails.name,
            [ENTRY_ID_DATE]: projectDetails.date,
            [ENTRY_ID_CEMENT]: totalCement,
            [ENTRY_ID_SAND]: totalSand,
            [ENTRY_ID_CONCRETE]: totalConcrete,
        };

        const formBody = Object.keys(data).map(key => {
            return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);
        }).join('&');

        fetch(GOOGLE_FORM_URL, {
            method: 'POST',
            body: formBody,
            mode: 'no-cors' 
        })
        .then(() => {
            submitMessage.style.backgroundColor = '#e8f5e9';
            submitMessage.style.color = '#1b5e20';
            submitMessage.textContent = `‚úÖ ‡¶∏‡¶´‡¶≤! ‡¶Æ‡ßã‡¶ü ${totalCement} ‡¶¨‡¶∏‡ßç‡¶§‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ Google Sheet-‡¶è ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§`;
            
            // ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶®
            setTimeout(() => {
                const confirmReset = confirm("‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?");
                if (confirmReset) {
                    resetTracker();
                    alert("‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§");
                } else {
                    finalSubmitButton.disabled = false;
                }
            }, 1000);
        })
        .catch(error => {
            submitMessage.style.backgroundColor = '#ffebee';
            submitMessage.style.color = '#c62828';
            submitMessage.textContent = '‚ùå ‡¶°‡ßá‡¶ü‡¶æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®‡•§';
            finalSubmitButton.disabled = false;
            console.error('Google Form-‡¶è ‡¶°‡ßá‡¶ü‡¶æ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡ßü‡ßá‡¶õ‡ßá:', error);
        });
    }

    // --- ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ---
    function resetTracker() {
        currentSand = 0;
        currentConcrete = 0;
        totalCement = 0;
        totalSand = 0;
        totalConcrete = 0;
        finalSubmitButton.disabled = false;
        submitMessage.style.backgroundColor = '#fbebeb';
        submitMessage.style.color = '#e53935';
        submitMessage.textContent = "‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡•§";
        
        // ‡¶∏‡ßá‡¶∂‡¶® ‡¶á‡¶®‡¶´‡ßã ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
        sessionSetup.style.display = 'block';
        mainTracker.style.display = 'none';
        projectNameInput.value = "‡¶®‡¶§‡ßÅ‡¶® ‡¶õ‡¶æ‡¶¶ ‡¶¢‡¶æ‡¶≤‡¶æ‡¶á";
        projectDateInput.value = '';
        projectDetails = { name: '', date: '' };
        
        updateDisplay();
    }


    // --- ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ---
    addSandButton.addEventListener('click', () => {
        if (currentSand < SAND_PER_BATCH) {
            currentSand++;
            totalSand++;
            updateDisplay();
        } else {
            alert('‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ: ‡ß© ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶¨‡¶æ‡¶≤‡¶ø ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá!');
        }
    });

    addConcreteButton.addEventListener('click', () => {
        if (currentConcrete < CONCRETE_PER_BATCH) {
            currentConcrete++;
            totalConcrete++;
            updateDisplay();
        } else {
             alert('‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ: ‡ß´ ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ç‡¶ï‡¶ø‡¶ü ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶õ‡ßá!');
        }
    });

    nextBatchButton.addEventListener('click', () => {
        if (currentSand >= SAND_PER_BATCH && currentConcrete >= CONCRETE_PER_BATCH) {
            totalCement++; 
            currentSand = 0;
            currentConcrete = 0;
            alert(`‚úÖ ${totalCement} ‡¶®‡¶Ç ‡¶¨‡¶∏‡ßç‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®‡•§`);
            updateDisplay();
        }
    });

    finalSubmitButton.addEventListener('click', () => {
        const confirmMsg = `‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü: ${projectDetails.name}-‡¶è‡¶∞ ‡¶Æ‡ßã‡¶ü ${totalCement} ‡¶¨‡¶∏‡ßç‡¶§‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§‡¶≠‡¶æ‡¶¨‡ßá Google Sheet-‡¶è ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶ö‡¶≤‡ßá‡¶õ‡ßá‡¶®‡•§ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`;
        if (confirm(confirmMsg)) {
            submitToGoogleForm();
        }
    });

    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    projectDateInput.valueAsDate = new Date();
    updateDisplay(); 
</script>

</body>
</html>
